-- MAKING DATA MANAGEMENT TABLES
CREATE TABLE parts (
	id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	description TEXT NOT NULL,
	stock TEXT NOT NULL,
	machine TEXT NOT NULL,
	complexity TEXT NOT NULL,
	isActive BOOLEAN NOT NULL
);
CREATE TABLE assemblies (
	id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	description TEXT NOT NULL,
	isActive BOOLEAN NOT NULL
);
CREATE TABLE joinPartsAssemblies(
	id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	partId INTEGER REFERENCES parts(id) ON DELETE CASCADE,
	assemblyId INTEGER REFERENCES assemblies(id) ON DELETE CASCADE
);
-- MAKING MANUFACTURING TABLES
CREATE TABLE machines (
	id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	name TEXT NOT NULL,
	type CHAR(1) NOT NULL,
	-- thru FLOAT NOT NULL,
	cellId INTEGER,
	isActive BOOLEAN NOT NULL
);
CREATE TABLE cells (
	id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	intra FLOAT NOT NULL,
	inter FLOAT NOT NULL,
	isActive BOOLEAN NOT NULL
);
--MAKING ROUTING HISTORY TABLES
CREATE TABLE tests (
	id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	runDate DATE NOT NULL,
	batchTime FLOAT NOT NULL
);
CREATE TABLE joinTestsAssemblies (
	id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	testId INTEGER REFERENCES tests(id) ON DELETE CASCADE,
	assemblyId INTEGER REFERENCES assemblies(id) ON DELETE CASCADE,
	cycleTime FLOAT NOT NULL
);
CREATE TABLE joinTestsMachines (
	id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	testId INTEGER REFERENCES tests(id) ON DELETE CASCADE,
	machineId INTEGER REFERENCES machines(id) ON DELETE CASCADE,
	utilizationTime FLOAT NOT NULL
);
-- MAKING USER TABLES
CREATE TABLE users (
	id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	username VARCHAR(8) NOT NULL,
	roles VARCHAR(10) NOT NULL
);